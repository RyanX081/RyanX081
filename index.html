<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WebWaste - Sustainable Digital Practices</title>
  <meta name="description" content="WebWaste empowers organizations and creators with tools, calculators, and resources to reduce digital carbon emissions and build a sustainable web." />
  <meta property="og:title" content="WebWaste - Sustainable Digital Practices">
  <meta property="og:description" content="Empowering sustainable web development.">
  <meta property="og:image" content="https://yourdomain.com/preview.png">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="WebWaste - Sustainable Digital Practices">
  <meta name="twitter:description" content="Empowering sustainable web development.">
  <meta name="twitter:image" content="https://yourdomain.com/preview.png">
  <meta name="theme-color" content="#21ca78">
  <link rel="icon" href="favicon.ico">
  <!-- Lottie for SVG animations -->
  <script src="https://unpkg.com/lottie-web@5.12.0/build/player/lottie.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --green: #21ca78;
      --dark-green: #154e33;
      --light-green: #eafcf6;
      --gray: #f6f6f6;
      --text-dark: #222;
      --text-light: #fff;
      --accent: #7cedbd;
      --transition: 0.6s cubic-bezier(.19,1,.22,1);
      --shadow: 0 6px 40px rgba(33,202,120,0.11);
      --focus-outline: 2px solid var(--green);
    }
    * { box-sizing: border-box; margin: 0; padding: 0;}
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', Arial, sans-serif;
      background: var(--gray);
      color: var(--text-dark);
      min-width: 320px;
      line-height: 1.6;
      font-size: 18px;
      transition: background .3s, color .3s;
    }
    body.dark {
      background: #1a2326;
      color: #f5f5f5;
    }
    body.dark section, body.dark .card, body.dark .feature-item, body.dark .practice-card {
      background: #232d31 !important;
      color: #d6f9e7 !important;
    }
    body.dark .stat, body.dark .metric-box {
      background: #23352b !important;
      color: #7cedbd !important;
    }
    body.dark .story-card {
      background: #1d2c26 !important;
      color: #d6f9e7 !important;
    }
    body:focus-within {
      outline: none;
    }
    .toggle-dark {
      position: fixed; top: 1.2rem; right: 1.5rem; z-index: 99;
      background: var(--green); color: #fff; border: none; border-radius: 2rem;
      padding: 0.7rem 1.3rem; cursor: pointer; font-weight: bold;
      box-shadow: 0 3px 18px rgba(33,202,120,0.22);
      font-size: 1.2rem;
      transition: background .23s, color .23s;
    }
    .toggle-dark:focus { outline: var(--focus-outline);}
    .back-to-top {
      position: fixed; bottom: 2rem; right: 2rem; display: none; z-index: 99;
      background: var(--accent); color: #17403a; border: none; border-radius: 50%;
      width: 48px; height: 48px; font-size: 1.7rem; cursor: pointer;
      box-shadow: 0 3px 12px rgba(33,202,120,0.20);
      transition: background .21s, color .21s;
    }
    .back-to-top.show { display: block; }
    .back-to-top:focus { outline: var(--focus-outline);}
    .progress-bar {
      position: fixed; top: 0; left: 0; height: 4px; background: var(--green);
      width: 0%; z-index: 200;
      transition: width 0.2s;
    }
    /* --- rest of your CSS, unchanged --- */
    /* (keep all your original styles from before here) */
    /* ... (See previous CSS for all sections, cards, nav, etc.) ... */
    /* Focus style for accessibility */
    a:focus, button:focus, input:focus, select:focus {
      outline: var(--focus-outline);
      outline-offset: 2px;
    }
    /* Tooltip styles */
    [data-tooltip] {
      position: relative;
      cursor: pointer;
    }
    [data-tooltip]:hover::after, [data-tooltip]:focus::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 50%; bottom: 115%;
      transform: translateX(-50%);
      background: var(--dark-green);
      color: #fff;
      padding: 0.4em 0.9em;
      border-radius: 0.7em;
      font-size: 0.95em;
      white-space: nowrap;
      z-index: 9999;
      opacity: 1;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <button class="toggle-dark" aria-label="Toggle dark mode" onclick="toggleDarkMode()" data-tooltip="Switch dark/light mode">🌙</button>
  <div class="progress-bar" id="progressBar" aria-hidden="true"></div>
  <button class="back-to-top" id="backTop" aria-label="Back to top" onclick="window.scrollTo({top:0,behavior:'smooth'})" data-tooltip="Back to top">&#8679;</button>
  <header>
    <nav aria-label="Main navigation">
      <div class="logo">WebWaste</div>
      <div class="nav-links" role="navigation" aria-label="Site sections">
        <a href="#crisis" tabindex="0">Crisis</a>
        <a href="#about" tabindex="0">About</a>
        <a href="#calculator" tabindex="0">Calculator</a>
        <a href="#practices" tabindex="0">Practices</a>
        <a href="#stories" tabindex="0">Stories</a>
      </div>
    </nav>
    <div class="hero" style="position:relative;">
      <!-- Lottie animation demo (replace URL with your own, or remove if not wanted) -->
      <div id="lottie-hero" style="width:80px;height:80px;margin:0 auto 1.2rem auto;"></div>
      <h1 aria-live="polite"><span id="heroType">Web<span style="color:#fff;">Waste</span></span></h1>
      <p>The future is about more than global digital innovation. It’s about the small changes that make a big impact.</p>
      <div class="cta-btns">
        <a href="#calculator" class="cta-btn" data-tooltip="Estimate your site's footprint">Calculate Your Carbon</a>
        <a href="#practices" class="cta-btn secondary" data-tooltip="Learn sustainable web practices">Sustainable Practices</a>
      </div>
      <div class="hero-stats" aria-label="Key Stats">
        <div class="stat">
          <span class="stat-number" data-animate-number="50" aria-label="50%">0</span>
          <span class="stat-label">energy waste from<br>inefficient websites</span>
        </div>
        <div class="stat">
          <span class="stat-number" data-animate-number="100000" aria-label="100,000+">0</span>
          <span class="stat-label">tons of CO2<br>yearly (websites)</span>
        </div>
        <div class="stat">
          <span class="stat-number" aria-label="Free">Free</span>
          <span class="stat-label">tools & resources</span>
        </div>
      </div>
    </div>
  </header>

  <!-- ... (all your original sections: Crisis, About, Calculator, Practices, Stories, Footer) ... -->
  <!-- (No changes needed to your HTML content, but you can make use of the new features above) -->

  <section id="crisis"> <!-- unchanged --> </section>
  <section id="about" class="about-section"> <!-- unchanged --> </section>
  <section id="calculator" class="calculator-section">
    <div class="calculator-title">Carbon Calculator</div>
    <form class="calculator-form" onsubmit="event.preventDefault();calcCarbon();">
      <label for="pageViews">Website Pageviews (monthly)</label>
      <input type="number" id="pageViews" required min="1" value="10000" aria-required="true" />
      <label for="pageSize">Avg. Page Size (MB)</label>
      <input type="number" id="pageSize" required step="0.01" min="0.01" value="2.5" aria-required="true" />
      <button type="submit">Get CO2 Estimate</button>
      <div class="calc-result" id="calcResult" aria-live="polite"></div>
    </form>
    <div style="text-align:center; font-size:1.13rem; margin-bottom:1.5rem;">Find out your website’s carbon footprint and see where you can optimize.</div>
  </section>
  <section id="practices"> <!-- unchanged --> </section>
  <section id="stories"> <!-- unchanged --> </section>
  <footer>
    &copy; 2025 WebWaste. Designed for a sustainable digital future.
  </footer>

  <script>
    // --- Lottie Animation (Hero icon) ---
    if (window.lottie) {
      lottie.loadAnimation({
        container: document.getElementById('lottie-hero'),
        renderer: 'svg',
        loop: true,
        autoplay: true,
        path: 'https://assets2.lottiefiles.com/packages/lf20_0yfsb3a1.json' // Use your own Lottie JSON!
      });
    }

    // --- Dark mode toggle ---
    function toggleDarkMode() {
      document.body.classList.toggle('dark');
      localStorage.setItem('darkMode', document.body.classList.contains('dark'));
      document.querySelector('.toggle-dark').textContent = document.body.classList.contains('dark') ? "☀️" : "🌙";
    }
    if (localStorage.getItem('darkMode') === 'true') {
      document.body.classList.add('dark');
      document.querySelector('.toggle-dark').textContent = "☀️";
    }

    // --- Back to top button and scroll progress bar ---
    window.addEventListener('scroll', () => {
      document.getElementById('backTop').classList.toggle('show', window.scrollY > 400);
      // Progress bar
      const doc = document.documentElement;
      const percent = 100 * (window.scrollY/(doc.scrollHeight-doc.clientHeight));
      document.getElementById('progressBar').style.width = percent + "%";
    });

    // --- Typewriter effect for hero title ---
    document.addEventListener("DOMContentLoaded", function() {
      const heroType = document.getElementById('heroType');
      if(heroType) {
        let full = "Web" + String.fromCharCode(160) + "Waste";
        let styled = ['Web','<span style="color:#fff;">Waste</span>'];
        let i = 0, out = "";
        function type() {
          if (i < full.length) {
            out += full[i] === " " ? "&nbsp;" : full[i];
            heroType.innerHTML = (i < 3) ? full.substring(0, i+1) : styled.join("");
            i++;
            setTimeout(type, 90);
          } else {
            heroType.innerHTML = styled.join("");
          }
        }
        type();
      }
    });

    // --- Animate sections/cards/metrics/stories on scroll (original) ---
    function animateOnScroll() {
      let observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.15 });
      document.querySelectorAll('section, .card, .metric-box, .feature-item, .practice-card, .story-card').forEach(el => {
        observer.observe(el);
      });
    }
    document.addEventListener("DOMContentLoaded", animateOnScroll);

    // --- Number animation for stats ---
    function animateNumber(el, end, duration=1200) {
      let start = 0, startTime = null;
      if (el.textContent.indexOf('+') !== -1) return; // Skip already formatted
      function step(ts) {
        if (!startTime) startTime = ts;
        let progress = (ts - startTime) / duration;
        let value = Math.floor(progress * end);
        el.textContent = progress < 1 ? value : end.toLocaleString();
        if (progress < 1) requestAnimationFrame(step);
        else el.textContent = end.toLocaleString() + (end === 100000 ? '+' : '%');
      }
      requestAnimationFrame(step);
    }
    function animateStats() {
      document.querySelectorAll('.stat-number[data-animate-number]').forEach(el => {
        let end = parseInt(el.getAttribute('data-animate-number'));
        animateNumber(el, end);
      });
    }
    window.addEventListener('load', animateStats);

    // --- Carbon calculator with improved validation ---
    function calcCarbon() {
      const result = document.getElementById('calcResult');
      const views = parseInt(document.getElementById('pageViews').value) || 0;
      const size = parseFloat(document.getElementById('pageSize').value) || 0;
      if(views < 1 || size <= 0) {
        result.style.color = "#de2828";
        result.innerText = "Please enter valid values!";
        return;
      }
      const emissionFactor = 0.5; // grams per MB per pageview
      const total = views * size * emissionFactor / 1000; // in kg CO2
      result.style.color = "var(--accent)";
      result.innerText = "Estimated CO₂: " + total.toFixed(2) + " kg/month";
    }

    // --- Keyboard navigation for accessibility ---
    document.addEventListener('keydown', function(e) {
      if (e.key === "Escape") document.activeElement.blur();
    });

    // --- Service Worker registration (optional PWA support - uncomment if you want) ---
    /*
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('/service-worker.js');
      });
    }
    */
  </script>
</body>
</html>
